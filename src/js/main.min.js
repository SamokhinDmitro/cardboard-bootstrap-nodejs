document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".popup"),t=document.querySelector(".popup-content__close"),n=new Date;function o(){t.addEventListener("click",(function(){e.style.display="none",document.body.style.overflow=""}))}o(),window.addEventListener("click",(function(t){t.target===e&&(e.style.display="none",document.body.style.overflow="")})),void 0===function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}("popup")&&setTimeout((function(){n=new Date(n.setDate(n.getDate()+1)),e.style.display="block",document.body.style.overflow="hidden",document.cookie=`${decodeURI("popup")} = ${decodeURI(!0)}; expires = ${n}; path = /`,o()}),5e3);let s=document.querySelector(".button_up");s.addEventListener("click",(function(){window.scroll(0,0)})),window.addEventListener("scroll",(function(){pageYOffset>document.documentElement.clientHeight?s.style.display="block":s.style.display="none"}));let i=document.querySelector(".navigation-btn"),a=document.querySelector(".navigation-block"),c=document.querySelector(".navigation");i.addEventListener("click",(function(){this.classList.toggle("navigation-btn__active"),a.classList.toggle("navigation-block__active"),c.classList.toggle("navigation__active")})),c.addEventListener("click",(function(e){let t=e.target;(t.classList.contains("navigation-block__link")||t.classList.contains("navigation__active"))&&(a.classList.remove("navigation-block__active"),c.classList.remove("navigation__active"),i.classList.remove("navigation-btn__active"))}));let l=document.createElement("div");l.classList.add("message");let d=document.forms.clients,r=document.forms.offerForm,u=document.forms.popupForm,m=d.elements.phones,v=r.elements.phones,p=u.elements.phones;d.nextElementSibling.prepend(l);let f="Загрузка...",g="Спасибо! Скоро мы с вами свяжемся",y="Что-то пошло не так",L="Введите телефон!";function b(e){let t=new XMLHttpRequest;if(t.open("POST","https://cardboard-bootstrap-nodejs.herokuapp.com/clients"),t.setRequestHeader("Content-type","application/json; charset = utf-8"),""===e.value)return e.addEventListener("blur",(function(){this.style.background="red",l.classList.add("message-error")})),l.textContent=L,l.classList.add("message-error"),e.value="",!1;{let n={phones:e.value};t.send(JSON.stringify(n)),t.addEventListener("readystatechange",(function(){t.readyState<4?l.textContent=f:4===t.readyState&&200===t.status?(e.style.background="#fff",l.textContent=g):l.textContent=y}))}!function(){for(let e=0;e<document.forms.length;e++)for(let t=0;t<document.forms[e].elements.length;t++)document.forms[e].elements[t].value=""}()}function E(){let e=[67,96,97,98,50,66,95,99,63,73,93,91,92,94].map((function(e){return"0"+e})).join("|");if(!new RegExp("/\\+38\\("+e+"\\)\\-(d{3})\\-(d{2})\\-(d{2})/").test(this.value))throw this.value="",this.style.background="red",l.textContent=L,l.classList.add("message-error"),new Error("Проверьте правильность ввода!");this.style.background="green",l.classList.remove("message-error"),l.textContent=""}function h(){document.querySelector(".popup").style.display="block"}m.addEventListener("blur",E),v.addEventListener("blur",E),p.addEventListener("blur",E),d.addEventListener("submit",(function(e){e.preventDefault(),b(m)})),r.addEventListener("submit",(function(e){e.preventDefault(),b(v)})),u.addEventListener("submit",(function(e){e.preventDefault(),b(p)})),document.querySelectorAll(".button__cta").forEach((function(e){e.addEventListener("click",h)}))}));